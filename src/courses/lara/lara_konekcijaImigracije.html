<h1>Konekcija sa bazom i migracije</h1>
<br>

Laravel pruža velike mogućnosti u radu sa bazama. U napravljenom blog folderu, nalazi se .env fajl. Sadržaj fajla se nalazi na slici.

<img src="courses/lara/images/env.png">

 U folderu config i database.php fajlu sledeća linija koda <span class = "primer_text"> 'default' => env('DB_CONNECTION', 'mysql') </span>
 
 govori da Laravel automatski ima konekciju sa mysql bazom podataka. U .env fajlu se može promeniti username, password i naziv baze, sto će sada biti urađeno. Podešeno će biti
 
 na root, '' i test redom. Sada se može pristupiti bazi podataka.
 
<h2>Migracije</h2>
 
 Migracije su vid kontrole baze podataka. Laravel koristi migracijske fajlove kako bi programeri koji koriste istu bazu znali šta je menjano u bazi podataka.
 
 Pre nego što se napravi nova migracija može se pogledati database/migrations folder. Tu se nalaze dva php fajla 2014_10_12_000000_create_users_table.php i 
 
 2014_10_12_100000_create_password_resets_table.php fajl. Otvorićemo prvi fajl.
 <xmp class = "primer_ta"> 
 
 <?php

use Illuminate\Support\Facades\Schema;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreateUsersTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('users', function (Blueprint $table) {
            $table->increments('id');
            $table->string('name');
            $table->string('email')->unique();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('users');
    }
}
 ?>
 </xmp>
 
 Kao što primećujete, kod unutar funkcije up() govori kakve su kolone, tj. koje tipove podatak sadrže, ažurira tabelu, a funkcija down() ima suprotan efekat, 
 
 uklanja efekat migracije koji ponovo može generisati.
 
 Sada iz komandne linije treba napraviti migraciju. Koristi se komanda php artisan make:migration create_tasks_table  --create="tasks". Naziv create_tasks_table 
 
 je naziv migracije, a tasks je naziv tabele i piše se u množini.

 Sa php artisan migrate dobija se poruka o uspešnoj migraciji pri čemu će sve migracije biti prikazane u komandnom prozoru ispod poruke. Fajl je kreiran u

 database/migrations folderu i izgleda ovako:
 
 <xmp class = "primer_ta"> 
<?php

use Illuminate\Support\Facades\Schema;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreateTasksTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('tasks', function (Blueprint $table) {
            $table->increments('id');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('tasks');
    }
}
?>


 </xmp>
 Shema::create metod ima dva parametra, prvi je naziv tabele, a drugi je anonimna funkcija čiji je argument dat nazivom table, ali može se zvati i drugačije.
 
 Taj parametar se koristi da bi se kreirale kolone tabele. Timestamps je specijalan metod Laravela. On kreira updated_at i created_at kolone. Laravel koristi ove 
 
 kolone da bi programeri koji pristupaju bazi znali kada je red u tabeli baze promenjen ili dodat. Naročito je korisno ako više programera

iz različitih delova sveta koriste istu bazu. Sa svakom migracijom u ovom folderu se kreira isti ovakav fajl.
<br>